{{ define "main" }}
  {{ if .Site.Params.homepage.showRecent }}
    <section>
      <h2 class="mt-8 text-2xl font-extrabold">{{ i18n "recent" }}</h2>
      {{ $recent := where .Site.RegularPages "Section" "toutorials" | first .Site.Params.homepage.recentLimit }}
      {{ if $recent }}
        <div class="grid gap-8 mt-4">
          {{ range $recent }}
            <article class="prose dark:prose-invert max-w-none">
              <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
              {{ if .Summary }}
                <p>{{ .Summary }}</p>
              {{ end }}
              <footer class="text-sm text-neutral-500">
                {{ if .PublishDate }}
                  <time datetime="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}">
                    {{ .PublishDate.Format "2006-01-02" }}
                  </time>
                {{ end }}
              </footer>
            </article>
          {{ end }}
        </div>
      {{ end }}
    </section>
  {{ end }}

  {{ if .Site.Params.homepage.showFeatured }}
    <section>
      <h2 class="mt-12 text-2xl font-extrabold">{{ i18n "featured" }}</h2>
      {{ $featured := where .Site.RegularPages ".Params.featured" true | first 3 }}
      {{ if $featured }}
        <div class="grid gap-8 mt-4">
          {{ range $featured }}
            <article class="prose dark:prose-invert max-w-none">
              <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
              {{ if .Summary }}
                <p>{{ .Summary }}</p>
              {{ end }}
              <footer class="text-sm text-neutral-500">
                {{ if .PublishDate }}
                  <time datetime="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}">
                    {{ .PublishDate.Format "2006-01-02" }}
                  </time>
                {{ end }}
              </footer>
            </article>
          {{ end }}
        </div>
      {{ end }}
    </section>
  {{ end }}
{{ end }}
